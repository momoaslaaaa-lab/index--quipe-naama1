<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠ - Ø§Ù„Ù†Ø¹Ø§Ù…Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #004d40;
            --secondary: #ffc107;
            --accent: #00796b;
            --text-dark: #333;
            --bg-light: #f4f6f8;
            --white: #ffffff;
            --danger: #dc3545;
            --success: #28a745;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-light);
            margin: 0;
            padding: 0;
            padding-bottom: 60px;
            color: var(--text-dark);
        }

        * { box-sizing: border-box; outline: none; }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± --- */
        header {
            background: linear-gradient(135deg, #004d40, #00796b);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .nav-wrapper { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
        .logo h1 { font-size: 1.3rem; margin: 0; font-weight: 800; }
        .logo span { font-size: 0.85rem; opacity: 0.9; display: block; font-weight: 300; }
        
        .top-controls { display: flex; gap: 10px; }
        .ctrl-btn {
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 8px 15px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.85rem;
            font-family: inherit;
            transition: 0.3s;
        }
        .ctrl-btn:hover { background: rgba(255,255,255,0.25); }
        
        body.admin-mode .admin-toggle {
            background: var(--secondary);
            color: #000;
            border-color: var(--secondary);
            font-weight: bold;
        }

        /* --- Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø±Ø¶ --- */
        .view { display: none; animation: fadeIn 0.4s ease; padding-top: 20px; }
        .view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© --- */
        .hero {
            background: linear-gradient(135deg, rgba(0, 77, 64, 0.95), rgba(0, 121, 107, 0.9)), url('https://picsum.photos/seed/naama/1600/900');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 80px 20px;
            text-align: center;
            border-radius: 0 0 20px 20px;
            margin-bottom: 40px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .hero h2 { font-size: 2.2rem; margin: 0 0 10px 0; font-weight: 800; }

        .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 60px; }
        .card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            text-align: center;
            transition: transform 0.3s;
            cursor: pointer;
            border-top: 5px solid var(--primary);
        }
        .card:hover { transform: translateY(-8px); }
        .card-icon { font-size: 3.5rem; margin-bottom: 20px; display: block; }
        .card h3 { font-size: 1.3rem; margin: 0 0 10px 0; color: var(--primary); }
        .service-list { text-align: right; padding: 0; list-style: none; color: #666; }
        .service-list li { margin-bottom: 8px; padding-right: 20px; position: relative; }
        .service-list li::before { content: 'â€¢'; color: var(--secondary); font-weight: bold; position: absolute; right: 0; }

        /* --- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ --- */
        .app-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 600px;
        }
        .app-header {
            background: #f8f9fa;
            padding: 15px 25px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .app-header h3 { margin: 0; color: var(--primary); font-size: 1.3rem; }
        .back-btn {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 6px 15px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-family: inherit;
        }
        .back-btn:hover { background: var(--primary); color: white; }
        .app-content { padding: 30px; overflow-x: auto; }

        /* --- Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙˆØ§Ù„Ù†Ù…Ø§Ø°Ø¬ --- */
        .table-responsive { width: 100%; overflow-x: auto; margin-top: 20px; border: 1px solid #eee; border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; min-width: 900px; }
        th, td { padding: 15px; text-align: right; border-bottom: 1px solid #eee; white-space: nowrap; vertical-align: top; }
        th { background-color: var(--primary); color: white; font-weight: 600; }
        tr:hover { background-color: #f1f1f1; }

        /* --- Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø´Ø±Ù --- */
        .admin-controls { display: none; }
        body.admin-mode .admin-controls { display: block; }
        body.admin-mode .delete-btn, body.admin-mode .edit-btn, body.admin-mode .btn-upload { display: inline-block; }
        body.admin-mode th:last-child, body.admin-mode td:last-child { width: 150px; }

        /* --- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¶Ø§ÙØ© --- */
        .admin-form {
            background: #fff8e1;
            border: 1px solid #ffeeba;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            display: none;
        }
        body.admin-mode .admin-form { display: block; animation: slideDown 0.3s; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        .input-group { margin-bottom: 15px; }
        .input-field {
            width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 8px; font-family: inherit; box-sizing: border-box;
        }
        .add-btn {
            width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;
        }

        /* --- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª --- */
        .action-group { display: flex; gap: 5px; }
        .btn-sm { padding: 4px 8px; border-radius: 4px; cursor: pointer; border: none; font-size: 0.75rem; color: white; display: none; }
        .delete-btn { background: var(--danger); }
        .edit-btn { background: var(--primary); }
        .save-btn { background: var(--success); }

        /* --- ØµÙˆØ± Ø§Ù„ÙˆØ±Ø´Ø§Øª --- */
        .img-preview { display: block; max-width: 100px; max-height: 100px; margin-top: 5px; border-radius: 4px; border: 1px solid #ddd; cursor: zoom-in; }
        .file-input-hidden { display: none; }
        .btn-upload {
            background: #17a2b8; color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; cursor: pointer; border: none; display: none;
        }

        /* --- Ø­Ù‚ÙˆÙ„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ --- */
        .edit-input { width: 100%; padding: 5px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; }

        /* --- Ø´Ø§Ø±Ø§Øª ÙˆØ´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… --- */
        .badge { padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; color: white; }
        .bg-green { background: var(--success); }
        .bg-yellow { background: var(--secondary); color: #333; }
        .progress-wrap { width: 100%; height: 8px; background: #eee; border-radius: 4px; overflow: hidden; margin-top: 5px; }
        .progress-fill { height: 100%; background: var(--secondary); }

        /* --- Ø²Ø± Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© --- */
        .preview-back-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--primary);
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 2000;
            cursor: pointer;
            font-weight: bold;
            display: none;
            animation: popIn 0.3s;
        }
        @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }
        body.preview-mode .preview-back-btn { display: block; }

        /* --- ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© --- */
        body.preview-mode header, 
        body.preview-mode .hero, 
        body.preview-mode .cards-grid, 
        body.preview-mode .back-btn, 
        body.preview-mode .admin-controls, 
        body.preview-mode .footer { display: none !important; }
        
        body.preview-mode .container { max-width: 100%; padding: 0; margin: 0; }
        body.preview-mode .view.active { display: block !important; }

        /* --- Ø§Ù„ØªØ°ÙŠÙŠÙ„ --- */
        .footer { background: #222; color: #aaa; text-align: center; padding: 20px; margin-top: 50px; font-size: 0.9rem; }

        /* --- Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ --- */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #333;
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: 0.3s;
            z-index: 2000;
        }
        .toast.show { transform: translateX(-50%) translateY(0); }

        /* --- Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© --- */
        @media print {
            header, .hero, .cards-grid, .back-btn, .top-controls, .admin-form, .delete-btn, .edit-btn, .btn-upload, .footer, .preview-back-btn { display: none !important; }
            body { background: white; color: black; -webkit-print-color-adjust: exact; }
            .container { max-width: 100%; padding: 0; }
            .view { display: none !important; }
            .view.active { display: block !important; }
            .app-container { box-shadow: none; border: none; margin: 0; }
            .app-header { border-bottom: 2px solid black; background: none; padding: 10px 0; display: block !important; }
            .app-header h3 { color: black; font-size: 18pt; }
            .table-responsive { overflow: visible; border: 1px solid black; }
            table { width: 100%; min-width: auto; font-size: 11pt; }
            th, td { border: 1px solid black; padding: 8px; color: black; }
            th { background-color: #ddd !important; color: black !important; -webkit-print-color-adjust: exact; font-size: 12pt; }
            th:last-child, td:last-child { display: none; }
        }
    </style>
</head>
<body>

    <!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ø§Ù„Ø¹Ø§Ø¦Ù… Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© -->
    <div class="preview-back-btn" onclick="exitPreview()">ğŸ  Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>

    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <header>
        <div class="container nav-wrapper">
            <div class="logo">
                <h1>Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠ</h1>
                <span>ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ù†Ø¹Ø§Ù…Ø© - Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</span>
            </div>
            <div class="top-controls">
                <button class="ctrl-btn admin-toggle" onclick="toggleAdmin()">ğŸ”’ ÙˆØ¶Ø¹ Ø§Ù„Ø²Ø§Ø¦Ø±</button>
                <button class="ctrl-btn" onclick="togglePreview()">ğŸ‘ï¸ Ø¹Ø±Ø¶ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© (Ø±ÙˆØªÙˆØ´Ø§Øª)</button>
                <button class="ctrl-btn" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
            </div>
        </div>
    </header>

    <div class="container">

        <!-- 1. Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="home-view" class="view active">
            <section class="hero">
                <h2>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</h2>
                <p>Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</p>
            </section>

            <div class="cards-grid">
                <div class="card" onclick="navTo('admin')">
                    <span class="card-icon">ğŸ‘¥</span>
                    <h3>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„ÙˆØ³Ø§Ø¦Ù„</h3>
                    <ul class="service-list">
                        <li>Ø¥Ø¯Ø§Ø±Ø© Ø´Ø¤ÙˆÙ† Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</li>
                        <li>Ø§Ù„ØªØ³ÙŠÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ ÙˆØ§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ</li>
                        <li>Ø§Ù„ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø§Ø¯ÙŠØ©</li>
                    </ul>
                </div>
                <div class="card" onclick="navTo('ops')">
                    <span class="card-icon">ğŸ—ï¸</span>
                    <h3>Ø§Ù„ØªØ³ÙŠÙŠØ± ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h3>
                    <ul class="service-list">
                        <li>Ù…ØªØ§Ø¨Ø¹Ø© Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</li>
                        <li>Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø¹Ù„Ù‰ ØªÙ†ÙÙŠØ° Ø§Ù„Ø£Ø´ØºØ§Ù„</li>
                        <li>Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©</li>
                    </ul>
                </div>
                <div class="card" onclick="navTo('tenders')">
                    <span class="card-icon">ğŸ“œ</span>
                    <h3>Ø§Ù„ØµÙÙ‚Ø§Øª Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠØ©</h3>
                    <ul class="service-list">
                        <li>Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù„ÙØ§Øª Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª</li>
                        <li>Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ù…Ù†Ø§Ù‚ØµØ§Øª</li>
                        <li>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶</li>
                    </ul>
                </div>
            </div>
        </div>


        <!-- 2. Ù…ØµÙ„Ø­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
        <div id="admin-view" class="view">
            <div class="app-container">
                <div class="app-header">
                    <button class="back-btn" onclick="navTo('home')">âœ Ø¹ÙˆØ¯Ø©</button>
                    <h3>Ù…ØµÙ„Ø­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„ÙˆØ³Ø§Ø¦Ù„</h3>
                </div>
                <div class="app-content">
                    
                    <div class="admin-form">
                        <h4 style="margin:0 0 15px 0;">â• Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯</h4>
                        <form onsubmit="addEmp(event)">
                            <div class="input-group">
                                <input type="text" id="empName" class="input-field" placeholder="Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨" required>
                            </div>
                            <div class="input-group">
                                <input type="text" id="empJob" class="input-field" placeholder="Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ" required>
                            </div>
                            <button type="submit" class="add-btn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø¬Ø¯ÙˆÙ„</button>
                        </form>
                    </div>

                    <div class="table-responsive">
                        <table id="empTable">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨</th>
                                    <th>Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</th>
                                    <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¯Ù…Ø§Ø¬</th>
                                    <th class="admin-controls">ØªØ­ÙƒÙ…</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹ÙˆØ¯Ø©</td>
                                    <td>Ù…Ù‡Ù†Ø¯Ø³ ØªØ·Ø¨ÙŠÙ‚ÙŠ</td>
                                    <td>2020-05-10</td>
                                    <td class="admin-controls">
                                        <div class="action-group">
                                            <button class="btn-sm edit-btn" onclick="editRow(this)">âœ ØªØ¹Ø¯ÙŠÙ„</button>
                                            <button class="btn-sm delete-btn" onclick="delRow(this)">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>
        <!-- 3. Ù…ØµÙ„Ø­Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª -->
        <div id="ops-view" class="view">
            <div class="app-container">
                <div class="app-header">
                    <button class="back-btn" onclick="navTo('home')">âœ Ø¹ÙˆØ¯Ø©</button>
                    <h3>Ù…ØµÙ„Ø­Ø© Ø§Ù„ØªØ³ÙŠÙŠØ± ÙˆØ§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h3>
                </div>
                <div class="app-content">
                    
                    <div class="admin-form">
                        <h4 style="margin:0 0 15px 0;">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¹ ØµÙˆØ±Ø©</h4>
                        <form onsubmit="addProj(event)">
                            <div class="form-grid">
                                <div class="input-group"><label>Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</label><input type="text" id="projWilaya" class="input-field" value="Ø§Ù„Ù†Ø¹Ø§Ù…Ø©" readonly></div>
                                <div class="input-group"><label>Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</label><input type="text" id="projCommune" class="input-field" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¹ÙŠÙ† ØµÙØ±" required></div>
                                <div class="input-group"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label><input type="text" id="projName" class="input-field" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹" required></div>
                                <div class="input-group"><label>Ø­ØµØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label><input type="text" id="projCess" class="input-field" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø­ØµØ©" required></div>
                                <div class="input-group"><label>Ø£Ù…Ø± Ø¥Ø·Ù„Ø§Ù‚</label><input type="date" id="projStart" class="input-field"></div>
                                <div class="input-group"><label>Ø£Ù…Ø± ØªÙˆÙ‚Ù</label><input type="date" id="projStop" class="input-field"></div>
                                <div class="input-group"><label>Ø£Ù…Ø± Ø§Ø³ØªØ¦Ù†Ø§Ù</label><input type="date" id="projResume" class="input-field"></div>
                                <div class="input-group"><label>Ù…Ø¨Ù„Øº (Ø¯.Ø¬)</label><input type="number" id="projAmount" class="input-field" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" required></div>
                                <div class="input-group"><label>Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙ‚Ø¯Ù… %</label><input type="number" id="projProgress" class="input-field" value="0" min="0" max="100"></div>
                                <div class="input-group" style="grid-column: 1 / -1px;"><label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø©</label><textarea id="projNotes" class="input-field" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª..." style="height: 60px;"></textarea></div>
                                <div class="input-group"><label>ØµÙˆØ±Ø© Ø§Ù„ÙˆØ±Ø´Ø©</label><input type="file" id="projImg" class="input-field" accept="image/*"></div>
                            </div>
                            <button type="submit" class="add-btn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</button>
                        </form>
                    </div>

                    <div class="table-responsive">
                        <table id="projTable">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</th>
                                    <th>Ø§Ù„Ù…Ù†Ø·Ù‚Ø© (Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©)</th>
                                    <th>Ø§Ù„Ø£ÙˆØ§Ù…Ø±</th>
                                    <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                    <th>Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙ‚Ø¯Ù…</th>
                                    <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                    <th>ØµÙˆØ±Ø© Ø§Ù„ÙˆØ±Ø´Ø©</th>
                                    <th class="admin-controls">ØªØ­ÙƒÙ…</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td data-val="ØªØ±Ù…ÙŠØ¯ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„ÙˆÙ„Ø§Ø¦ÙŠ 34">ØªØ±Ù…ÙŠØ¯ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„ÙˆÙ„Ø§Ø¦ÙŠ 34</td>
                                    <td data-val="Ø¹ÙŠÙ† ØµÙØ± - Ø§Ù„Ù†Ø¹Ø§Ù…Ø©">Ø¹ÙŠÙ† ØµÙØ± - Ø§Ù„Ù†Ø¹Ø§Ù…Ø©</td>
                                    <td>
                                        <div class="pct-data" style="display:none">75</div>
                                        <div>75%</div>
                                        <div class="progress-wrap"><div class="progress-fill" style="width: 75%"></div></div>
                                    </td>
                                    <td data-val="15000000">15,000,000</td>
                                    <td>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ù…ØªØ§Ø²</td>
                                    <td>Ù„Ø§ ÙŠÙˆØ¬Ø¯</td>
                                    <td class="img-cell">
                                        <button class="btn-upload" onclick="triggerUpload(this)">ğŸ“· Ø¥Ø¶Ø§ÙØ©</button>
                                        <input type="file" class="file-input-hidden" accept="image/*" onchange="showImg(this)">
                                    </td>
                                    <td class="admin-controls">
                                        <div class="action-group">
                                            <button class="btn-sm edit-btn" onclick="editRow(this)">âœ ØªØ¹Ø¯ÙŠÙ„</button>
                                            <button class="btn-sm delete-btn" onclick="delRow(this)">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>


        <!-- 4. Ù…ØµÙ„Ø­Ø© Ø§Ù„ØµÙÙ‚Ø§Øª -->
        <div id="tenders-view" class="view">
            <div class="app-container">
                <div class="app-header">
                    <button class="back-btn" onclick="navTo('home')">âœ Ø¹ÙˆØ¯Ø©</button>
                    <h3>Ù…ØµÙ„Ø­Ø© Ø§Ù„ØµÙÙ‚Ø§Øª Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠØ©</h3>
                </div>
                <div class="app-content">
                    
                    <div class="admin-form">
                        <h4 style="margin:0 0 15px 0;">â• Ø¥Ø¯Ø±Ø§Ø¬ ØµÙÙ‚Ø©</h4>
                        <form onsubmit="addTend(event)">
                            <div class="form-grid">
                                <div class="input-group"><input type="text" id="tendNum" class="input-field" placeholder="Ø±Ù‚Ù… Ø§Ù„ØµÙÙ‚Ø©" required></div>
                                <div class="input-group"><input type="text" id="tendSub" class="input-field" placeholder="Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹" required></div>
                                <div class="input-group"><input type="number" id="tendVal" class="input-field" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" required></div>
                            </div>
                            <button type="submit" class="add-btn">Ø¥Ø¯Ø±Ø§Ø¬</button>
                        </form>
                    </div>

                    <div class="table-responsive">
                        <table id="tendTable">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„Ø±Ù‚Ù…</th>
                                    <th>Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</th>
                                    <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    <th class="admin-controls">ØªØ­ÙƒÙ…</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>24/2023</td>
                                    <td>Ø£Ø´ØºØ§Ù„ ØµÙŠØ§Ù†Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„ÙˆÙ„Ø§Ø¦ÙŠ</td>
                                    <td data-val="15000000">15,000,000</td>
                                    <td><span class="badge bg-green">Ø¬Ø§Ø±ÙŠØ©</span></td>
                                    <td class="admin-controls">
                                        <div class="action-group">
                                            <button class="btn-sm edit-btn" onclick="editRow(this)">âœ ØªØ¹Ø¯ÙŠÙ„</button>
                                            <button class="btn-sm delete-btn" onclick="delRow(this)">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <div class="footer">
        <p>&copy; 2023 Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠ Ù„ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ù†Ø¹Ø§Ù…Ø©</p>
    </div>

    <div id="toast" class="toast">ØªÙ…Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­</div>

    <script>
        let isAdmin = false;
        const PASSWORD = "1234"; // ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±

        function toggleAdmin() {
            if (isAdmin) {
                isAdmin = false;
                document.body.classList.remove('admin-mode');
                document.querySelector('.admin-toggle').innerHTML = 'ğŸ”’ ÙˆØ¶Ø¹ Ø§Ù„Ø²Ø§Ø¦Ø±';
                showToast('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');
            } else {
                const pass = prompt("Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:");
                if (pass === PASSWORD) {
                    isAdmin = true;
                    document.body.classList.add('admin-mode');
                    document.querySelector('.admin-toggle').innerHTML = 'ğŸ”“ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø´Ø±Ù';
                    showToast('ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø´Ø±Ù');
                } else {
                    showToast('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©!');
                }
            }
        }

        function togglePreview() {
            document.body.classList.toggle('preview-mode');
            if(document.body.classList.contains('preview-mode')) {
                showToast('ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©');
            } else {
                showToast('Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø§Ø¯ÙŠ');
            }
        }

        function exitPreview() {
            document.body.classList.remove('preview-mode');
            navTo('home');
        }

        function navTo(pageId) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(pageId + '-view').classList.add('active');
            window.scrollTo(0,0);
        }

        function delRow(btn) {
            if(confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°Ù Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ')) {
                const row = btn.closest('tr');
                row.style.background = '#ffdddd';
                setTimeout(() => {
                    row.remove();
                    showToast('ØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ù†Ø¬Ø§Ø­');
                }, 300);
            }
        }

        function editRow(btn) {
            const row = btn.closest('tr');
            if (btn.classList.contains('save-btn')) {
                saveRow(row, btn);
                return;
            }

            btn.classList.remove('edit-btn');
            btn.classList.add('save-btn');
            btn.innerHTML = 'ğŸ’¾ Ø­ÙØ¸';

            const cells = row.querySelectorAll('td');
            for(let i = 0; i < cells.length - 1; i++) {
                const cell = cells[i];
                if (cell.querySelector('.pct-data')) {
                    const pct = cell.querySelector('.pct-data').innerText;
                    cell.innerHTML = `<input type="number" class="edit-input" value="${pct}" min="0" max="100"> %`;
                } else if (!cell.querySelector('img') && !cell.querySelector('input') && !cell.querySelector('button')) {
                    const text = cell.innerText;
                    const val = cell.getAttribute('data-val') || text;
                    cell.innerHTML = `<input type="text" class="edit-input" value="${val}">`;
                }
            }
        }

        function saveRow(row, btn) {
            btn.classList.remove('save-btn');
            btn.classList.add('edit-btn');
            btn.innerHTML = 'âœ ØªØ¹Ø¯ÙŠÙ„';

            const cells = row.querySelectorAll('td');
            for(let i = 0; i < cells.length - 1; i++) {
                const cell = cells[i];
                const input = cell.querySelector('input');
                if (input) {
                    const val = input.value;
                    if (input.type === 'number') {
                        let color = 'var(--secondary)';
                        if(val > 50) color = '#28a745';
                        else if(val < 30) color = '#17a2b8';
                        cell.innerHTML = `
                            <div class="pct-data" style="display:none">${val}</div>
                            <div>${val}%</div>
                            <div class="progress-wrap"><div class="progress-fill" style="width: ${val}%; background:${color}"></div></div>
                        `;
                    } else {
                        cell.setAttribute('data-val', val);
                        cell.innerText = val;
                    }
                }
            }
            showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª');
        }

        function showImg(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'img-preview';
                    const oldImg = input.parentElement.querySelector('.img-preview');
                    if(oldImg) oldImg.remove();
                    input.parentElement.appendChild(img);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        function triggerUpload(btn) {
            const input = btn.nextElementSibling;
            input.click();
        }

        function addEmp(e) {
            e.preventDefault();
            const tbody = document.querySelector('#empTable tbody');
            tbody.insertAdjacentHTML('beforeend', `
                <tr>
                    <td>${document.getElementById('empName').value}</td>
                    <td>${document.getElementById('empJob').value}</td>
                    <td>${new Date().toISOString().split('T')[0]}</td>
                    <td class="admin-controls"><div class="action-group"><button class="btn-sm edit-btn" onclick="editRow(this)">âœ</button><button class="btn-sm delete-btn" onclick="delRow(this)">ğŸ—‘ï¸</button></div></td>
                </tr>
            `);
            document.getElementById('empName').value = '';
            document.getElementById('empJob').value = '';
            showToast('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ¸Ù');
        }

        function addProj(e) {
            e.preventDefault();
            const tbody = document.querySelector('#projTable tbody');
            const row = document.createElement('tr');
            
            const fields = {
                w: document.getElementById('projWilaya').value,
                c: document.getElementById('projCommune').value,
                n: document.getElementById('projName').value,
                cess: document.getElementById('projCess').value,
                s: document.getElementById('projStart').value || '-',
                st: document.getElementById('projStop').value || '-',
                res: document.getElementById('projResume').value || '-',
                a: document.getElementById('projAmount').value,
                pr: document.getElementById('projProgress').value,
                notes: document.getElementById('projNotes').value,
                fileInput: document.getElementById('projImg')
            };

            row.innerHTML = `
                <td data-val="${fields.n}">${fields.n}</td>
                <td data-val="${fields.c}">${fields.c}</td>
                <td>
                    <div class="pct-data" style="display:none">${fields.pr}</div>
                    <div>${fields.pr}%</div>
                    <div class="progress-wrap"><div class="progress-fill" style="width: ${fields.pr}%"></div></div>
                </td>
                <td data-val="${fields.a}">${parseInt(fields.a).toLocaleString()}</td>
                <td>
                    <small>Ø¨Ø¯Ø§ÙŠØ©: ${fields.s}</small><br>
                    <small>ØªÙˆÙ‚Ù: ${fields.st}</small><br>
                    <small>Ø§Ø³ØªØ¦Ù†Ø§Ù: ${fields.res}</small>
                </td>
                <td>${fields.notes}</td>
                <td class="img-cell">
                    <button class="btn-upload" onclick="triggerUpload(this)">ğŸ“· Ø¥Ø¶Ø§ÙØ©</button>
                    <input type="file" class="file-input-hidden" accept="image/*" onchange="showImg(this)">
                </td>
                <td class="admin-controls">
                    <div class="action-group">
                        <button class="btn-sm edit-btn" onclick="editRow(this)">âœ</button>
                        <button class="btn-sm delete-btn" onclick="delRow(this)">ğŸ—‘ï¸</button>
                    </div>
                </td>
            `;
            tbody.appendChild(row);

            if(fields.fileInput.files && fields.fileInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(evt) {
                    const imgTag = `<img src="${evt.target.result}" class="img-preview">`;
                    const cell = row.querySelector('.img-cell');
                    cell.innerHTML = `<button class="btn-upload" onclick="triggerUpload(this)">ğŸ“· ØªØºÙŠÙŠØ±</button><input type="file" class="file-input-hidden" accept="image/*" onchange="showImg(this)">` + imgTag;
                };
                reader.readAsDataURL(fields.fileInput.files[0]);
            }

            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('projName').value = '';
            document.getElementById('projCommune').value = '';
            document.getElementById('projCess').value = '';
            document.getElementById('projStart').value = '';
            document.getElementById('projStop').value = '';
            document.getElementById('projResume').value = '';
            document.getElementById('projAmount').value = '';
            document.getElementById('projProgress').value = '';
            document.getElementById('projNotes').value = '';
            document.getElementById('projImg').value = '';
            showToast('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹');
        }

        function addTend(e) {
            e.preventDefault();
            const tbody = document.querySelector('#tendTable tbody');
            tbody.insertAdjacentHTML('beforeend', `
                <tr>
                    <td>${document.getElementById('tendNum').value}</td>
                    <td>${document.getElementById('tendSub').value}</td>
                    <td data-val="${document.getElementById('tendVal').value}">${parseInt(document.getElementById('tendVal').value).toLocaleString()}</td>
                    <td><span class="badge bg-yellow">Ø¬Ø¯ÙŠØ¯Ø©</span></td>
                    <td class="admin-controls">
                        <div class="action-group">
                            <button class="btn-sm edit-btn" onclick="editRow(this)">âœ ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="btn-sm delete-btn" onclick="delRow(this)">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                        </div>
                    </td>
                </tr>
            `);
            document.getElementById('tendNum').value = '';
            document.getElementById('tendSub').value = '';
            document.getElementById('tendVal').value = '';
            showToast('ØªÙ…Øª Ø¥Ø¯Ø±Ø§Ø¬ Ø§Ù„ØµÙÙ‚Ø©');
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.textContent = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }
    </script>

</body>
</html>